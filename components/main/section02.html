<section class="sec02">
    <div class="wrapper" max="1440">
        <h3 class="h3">
            <p>더 빠르고 부드러운 시력 교정술,<br/><span>자이스 스마일라식</span></p>
        </h3>
        <p class="tbx">
            아름다운 눈, 소중한 눈, 눈의 건강을 지키기 위해 끊임없이 노력하는 예일안과는<br/>
            안전한 시력 교정을 위해 스마일 수술을 개발한 자이스 장비를 도입했습니다. <br/>
            본원은 회복과 시력의 질 향상을 위해 숙련된 의료진이 검사부터, 수술, 사후 관리까지 <br/>
            <span>1:1 맞춤형으로 커스터마이징 스마일 라식을 추구</span>합니다. 
        </p>
    </div>
    
    <div class="wallpaper">
        <div class="back"></div>
    </div>

    <div class="two">
        
        <div class="bt">
            <h4>Yeil <span>Eye Clinic</span></h4>
        </div>

        <div class="wrapper" max="1440">

            <div class="area">
                <div>
                    <dl>
                        <dt>사용면적</dt>
                        <dd>1,366.29 <span>m2</span></dd>
                    </dl>
                </div>
                <div class="right">
                    <dl>
                        <dt>건물 층수</dt>
                        <dd>B1~F4 <span>Floor</span></dd>
                    </dl>
                </div>
                <div>
                    <dl>
                        <dt>개원 년도</dt>
                        <dd><span>Since</span> 2000</dd>
                    </dl>
                </div>
                <div class="center">
                    <dl>
                        <dt>의료진 수</dt>
                        <dd>27 People</dd>
                    </dl>
                </div>
            </div>
    
        </div>

    </div>

    <div class="more-box">
        <div class="more-flex">
            <a href="/smilelasik.php" class="box">
                <div class="img"></div>
                <dl>
                    <dt>SMILE LASIK</dt>
                    <dd>스마일라식</dd>
                </dl>
                <div class="more">View More</div>
            </a>
            <a href="/presbyopia.php" class="box">
                <div class="img"></div>
                <dl>
                    <dt>Presbyopia & Cataract</dt>
                    <dd>노안·백내장</dd>
                </dl>
                <div class="more">View More</div>
            </a>
        </div>
        <p>원하는 분야를 선택하세요. 해당 시술 내용을 확인할 수 있습니다.</p>
    </div>

</section>


<script>

    gsap.registerPlugin(SplitText);

    const h3Split = new SplitText('._main .sec02 .h3 p');
    gsap.from(h3Split.chars, {
        y: 100,
        autoAlpha: 0, 
        stagger: 0.05,
        scrollTrigger : {
            trigger : "._main .sec02 .h3",
            start : "top bottom-=10%"
        }
    });
    
    gsap.from('._main .sec02 .tbx', {
        x: 100,
        opacity : 0,
        scrollTrigger : {
            trigger : "._main .sec02 .tbx",
            start : "top bottom-=10%"
        }
    });

    gsap.timeline({
        scrollTrigger : {
            trigger : "._main .sec02",
            endTrigger : "._main .sec02 .two",
            // markers : true,
            start : "top top",
            end : "bottom center",
            scrub : 1,
        }
    })
    .to('._main .sec02 .wallpaper',{
        clipPath: "circle(100% at 50% 50%)",
    },'a')
    .to('._main .sec02 .wallpaper .back',{
        opacity : 1
    },'a')

    ScrollTrigger.create({
        trigger : "._main .sec02 .wallpaper",
        endTrigger : "._main .sec02",
        end : "bottom bottom",
        // markers : true,
        pin : true,
        pinSpacing : false,
        scrub : 1,
    });

    ScrollTrigger.create({
        trigger : "._main .sec02 .two .bt",
        endTrigger : "._main .sec02 .two .area",
        start : "top center",
        end : "bottom bottom",
        // markers : true,
        pin : true,
        pinSpacing : false,
    });


    $('._main .sec02 .more-box .more-flex .box').click(function(e){

        if(window.innerWidth >= 821){

            e.preventDefault();

            const href = $(this).attr('href');

            let imgSrc;

            switch($(this).index()){
                case 0 :
                    imgSrc = "/asset/img/main/sec02_01.png";
                    break;
                case 1 :
                    imgSrc = "/asset/img/main/sec02_02.png";
                    break;
            }

            const clone = $(this).clone();

            clone.addClass('fix-img');

            const option = {
                y : $(this)[0].getBoundingClientRect().top,
                x : $(this)[0].getBoundingClientRect().left,
                width : $(this).width(),
                height : $(this).height(),
            };

            $(clone).css({
                position: "fixed",
                left : option.x,
                top : option.y,
                width : option.width,
                height : option.height
            })

            $(clone).find("dl").remove();
            $(clone).find(".more").remove();

            $(clone).find(".img").css({
                opacity : 1,
                transition : 'none',
                backgroundImage : `url(${imgSrc})`,
            });

            $(clone).click((e)=>{e.preventDefault(); return false;});

            $(document.body).append(clone);

            gsap.timeline({
                onComplete : ()=>{
                    window.location.href = href;
                }
            })
            .to($(clone),{
                width : window.innerWidth,
                height : window.innerHeight,
                duration : 0.6,
            },"a")
            .to($(clone),{
                left : 0,
                top : 0,
                rigiht : 0,
                bottom : 0,
            },'a')

            return false;

        }

    });

</script>